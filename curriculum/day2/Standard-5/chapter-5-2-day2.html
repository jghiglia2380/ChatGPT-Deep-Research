<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PFL Academy - Chapter 5.2: Understanding the Power of Compound Interest and the Rule of 72 - Learning Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Core component styles */
        .learning-objectives {
            background-color: #e6f3ff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            transition: all 0.3s ease;
        }
        
        .learning-objectives:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .discussion-prompt {
            background-color: #e6f0ff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #3b82f6;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            transition: all 0.3s ease;
        }
        
        .discussion-prompt:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .audio-player {
            background-color: #f4f4f5;
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }
        
        /* Custom styles for specific components */
        .activity-timer {
            background: linear-gradient(to right, #eef2ff, #ede9fe);
            border-left: 4px solid #4f46e5;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0.5rem;
        }
        
        .learning-station {
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            background-color: #ffffff;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            transition: all 0.3s ease;
        }
        
        .learning-station:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            background-image: linear-gradient(to bottom right, rgba(79, 70, 229, 0.02), rgba(124, 58, 237, 0.02));
        }
        
        .learning-station h3 {
            color: #4f46e5;
            margin-bottom: 0.75rem;
        }
        
        .station-number {
            display: inline-block;
            width: 2rem;
            height: 2rem;
            text-align: center;
            line-height: 2rem;
            background: linear-gradient(to right, #4f46e5, #6366f1);
            color: white;
            border-radius: 9999px;
            margin-right: 0.5rem;
            box-shadow: 0 2px 4px -1px rgba(79, 70, 229, 0.3);
        }
        
        .important-note {
            background-color: #fffbeb;
            border-left: 4px solid #f59e0b;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .important-note:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .progress-bar {
            background-color: #e0e7ff;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }
        
        /* Section headers with decorative elements */
        .section-title {
            position: relative;
            padding-bottom: 0.75rem;
            margin-bottom: 1.5rem;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, #4f46e5, #8b5cf6);
            border-radius: 3px;
        }
        
        /* Day Toggle in sidebar */
        .day-toggle {
            display: flex;
            background-color: #f3f4f6;
            border-radius: 9999px;
            padding: 0.25rem;
            margin-bottom: 1rem;
            overflow: hidden;
        }
        
        .day-toggle-option {
            flex: 1;
            text-align: center;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .day-toggle-option.active {
            background: linear-gradient(to right, #4f46e5, #6366f1);
            color: white;
            box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.1);
        }
        
        /* Station indicators */
        .station-indicators {
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
        }
        
        .station-indicator {
            width: 0.75rem;
            height: 0.75rem;
            border-radius: 50%;
            background-color: #e5e7eb;
            margin: 0 0.25rem;
            transition: all 0.3s ease;
        }
        
        .station-indicator.active {
            background: linear-gradient(to right, #4f46e5, #6366f1);
            transform: scale(1.2);
        }
        
        /* Toast notifications */
        .toast-notification {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background-color: #4f46e5;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transform: translateY(150%);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            z-index: 50;
        }
        
        .toast-notification.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        /* Button styles */
        .pfl-button {
            background: linear-gradient(to right, #4f46e5, #6366f1);
            color: white;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .pfl-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            filter: brightness(110%);
        }
        
        /* Smooth scrolling for anchor links */
        html {
            scroll-behavior: smooth;
        }
        
        /* Calculator-specific styles */
        .range-slider-container {
            margin-bottom: 1rem;
        }
        
        .range-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #d1d5db;
            outline: none;
            margin: 10px 0;
        }
        
        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .range-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            background: #6366f1;
        }
        
        .calculator-display {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
            transition: all 0.3s ease;
        }
        
        .calculator-result {
            font-size: 1.5rem;
            font-weight: 600;
            color: #4f46e5;
            margin-bottom: 0.5rem;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
    </style>
</head>
<body class="bg-gray-50">
    <header class="bg-gradient-to-r from-indigo-700 to-purple-700 text-white p-4 shadow-md fixed top-0 left-0 right-0 z-40">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center">
                <div class="flex justify-center items-center h-10 w-10 rounded bg-white/20 text-white font-bold">
                    PFL
                </div>
                <span class="ml-3 text-xl font-bold">PFL Academy</span>
            </div>
            <nav class="hidden md:flex space-x-8">
                <a href="#" class="text-white hover:text-indigo-200 transition-colors nav-link">Home</a>
                <a href="#" class="text-white hover:text-indigo-200 transition-colors nav-link">Curriculum</a>
                <a href="#" class="text-white hover:text-indigo-200 transition-colors nav-link">Resources</a>
                <a href="#" class="text-white hover:text-indigo-200 transition-colors nav-link">Profile</a>
            </nav>
            <!-- Mobile menu button -->
            <button class="md:hidden text-white focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </div>
    </header>
    <div class="h-20"></div>

    <div class="container mx-auto px-4 py-8 grid lg:grid-cols-10 gap-8">
        <!-- Sidebar Navigation -->
        <div class="lg:col-span-3 bg-white rounded-xl shadow-xl p-6 sticky top-20 max-h-screen overflow-y-auto border border-gray-200">
            <div id="standard-info">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Standard 5: Saving and Investing</h2>
                <p class="text-gray-600 mb-4">Strategies for building wealth through saving and investing, understanding different investment options, and planning for long-term financial goals.</p>
            </div>
            
            <!-- Day Toggle -->
            <div class="day-toggle">
                <a href="chapter-5-2-day1.html" class="day-toggle-option">Day 1</a>
                <div class="day-toggle-option active">Day 2</div>
            </div>
            
            <ul class="space-y-2" id="chapter-navigation">
                <!-- Previous Chapter -->
                <li>
                    <a href="#" class="text-sm flex items-center p-2 rounded text-green-700 bg-green-50 hover:bg-green-100">
                        <span class="mr-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </span>
                        Chapter 5.1: Saving and Investing
                    </a>
                </li>
                
                <!-- Current Chapter -->
                <li>
                    <div class="flex items-center bg-indigo-50 p-2 rounded-lg">
                        <span class="border-l-4 border-indigo-700 pl-2 text-indigo-700 font-medium">Chapter 5.2: Understanding Compound Interest</span>
                    </div>
                    <!-- Section Navigation for Current Chapter -->
                    <ul class="ml-6 mt-2 space-y-1" id="section-navigation">
                        <li>
                            <a href="#learning-objectives" class="text-indigo-700 font-medium flex items-center">
                                <span class="mr-2">•</span> Learning Objectives
                            </a>
                        </li>
                        <li>
                            <a href="#intro" class="text-gray-700 hover:text-indigo-700 flex items-center transition-colors">
                                <span class="mr-2">•</span> Introduction
                            </a>
                        </li>
                        <li>
                            <a href="#station1" class="text-gray-700 hover:text-indigo-700 flex items-center transition-colors">
                                <span class="mr-2">•</span> Compound Interest Simulator
                            </a>
                        </li>
                        <li>
                            <a href="#station2" class="text-gray-700 hover:text-indigo-700 flex items-center transition-colors">
                                <span class="mr-2">•</span> Goal-Setting Activity
                            </a>
                        </li>
                        <li>
                            <a href="#station3" class="text-gray-700 hover:text-indigo-700 flex items-center transition-colors">
                                <span class="mr-2">•</span> Time Value of Money Challenge
                            </a>
                        </li>
                        <li>
                            <a href="#portfolio" class="text-gray-700 hover:text-indigo-700 flex items-center transition-colors">
                                <span class="mr-2">•</span> Portfolio Integration
                            </a>
                        </li>
                        <li>
                            <a href="#reflection" class="text-gray-700 hover:text-indigo-700 flex items-center transition-colors">
                                <span class="mr-2">•</span> Reflection
                            </a>
                        </li>
                    </ul>
                </li>
                
                <!-- Future Chapter -->
                <li>
                    <a href="#" class="text-sm flex items-center p-2 rounded text-gray-700 hover:bg-gray-100">
                        Chapter 5.3: Evaluating Saving and Investment Strategies
                    </a>
                </li>
                <li>
                    <a href="#" class="text-sm flex items-center p-2 rounded text-gray-700 hover:bg-gray-100">
                        Chapter 5.4: Time is Money
                    </a>
                </li>
                <li>
                    <a href="#" class="text-sm flex items-center p-2 rounded text-gray-700 hover:bg-gray-100">
                        Chapter 5.5: Understanding Monetary Risk
                    </a>
                </li>
            </ul>
            
            <!-- Progress Tracker -->
            <div class="mt-8 bg-gradient-to-r from-indigo-100 to-purple-100 rounded-xl p-4 shadow-lg">
                <h3 class="text-lg font-semibold text-indigo-800 mb-2">Your Progress</h3>
                <div class="w-full bg-white/50 rounded-full h-2.5 mb-4">
                    <div class="bg-gradient-to-r from-indigo-600 to-purple-600 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
                <p class="text-sm text-indigo-800">Completed: <span class="font-medium">0/4 stations</span></p>
                
                <!-- Station Indicators -->
                <div class="station-indicators mt-3">
                    <div class="station-indicator"></div>
                    <div class="station-indicator"></div>
                    <div class="station-indicator"></div>
                    <div class="station-indicator"></div>
                </div>
            </div>
            
            <!-- Return to Day 1 button -->
            <div class="mt-6">
                <a href="chapter-5-2-day1.html" class="block w-full text-center border border-indigo-600 text-indigo-600 hover:bg-indigo-50 font-medium px-4 py-2 rounded-md transition hover:-translate-y-1 hover:shadow-md">
                    ← Return to Day 1 Content
                </a>
            </div>
        </div>
        <!-- Main Content -->
        <div class="lg:col-span-7 bg-white rounded-xl shadow-xl p-6 border border-gray-200">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Chapter 5.2: Understanding the Power of Compound Interest and the Rule of 72 - Learning Lab</h1>
            <p class="text-xl text-gray-600 mb-6">Applying compound interest knowledge through interactive simulations and goal setting</p>
            
            <!-- Learning Objectives Section -->
            <div id="learning-objectives" class="learning-objectives">
                <h2 class="text-xl font-semibold text-gray-900 mb-3">Learning Objectives</h2>
                <p class="mb-2">By the end of this Learning Lab, you will be able to:</p>
                <ul class="list-disc list-inside space-y-1 text-gray-700">
                    <li>Calculate compound interest using interactive tools</li>
                    <li>Apply the Rule of 72 to estimate investment doubling time</li>
                    <li>Create a personalized savings plan using compound interest concepts</li>
                    <li>Analyze the impact of different variables on long-term investment growth</li>
                    <li>Compare financial decisions using the time value of money concept</li>
                </ul>
            </div>
            
            <!-- Introduction Section -->
            <section id="intro">
                <h2 class="text-2xl font-bold text-gray-900 section-title">Introduction</h2>
                <p class="text-gray-700 mb-4">Welcome to the Learning Lab for compound interest and the Rule of 72\! Today, you'll move beyond theory and apply these powerful concepts to real-life financial planning. You'll use interactive tools to visualize how your money can grow over time, create personalized investment plans, and understand how time value of money impacts financial decisions.</p>
                
                <!-- Important Note -->
                <div class="important-note">
                    <h3 class="font-semibold text-yellow-800">Important Note</h3>
                    <p class="text-gray-700">The simulations in this Learning Lab use estimated returns and simplified calculations for educational purposes. When making actual investment decisions, you'll want to consider additional factors like taxes, inflation, and varying rates of return over time.</p>
                </div>
                
                <!-- Day 1 Connection -->
                <div class="mt-4 bg-indigo-50 p-4 rounded-lg border-l-4 border-indigo-500">
                    <h3 class="text-lg font-semibold text-indigo-800 mb-2">Connection to Day 1</h3>
                    <p class="text-gray-700 mb-3">In Day 1, we explored the fundamental concepts of compound interest and the Rule of 72. Today, we'll build on these concepts to:</p>
                    <ul class="list-disc list-inside text-gray-700 ml-2">
                        <li>Visualize how compound interest grows money exponentially over time</li>
                        <li>Apply the Rule of 72 to practical investment scenarios</li>
                        <li>Create personalized savings plans aligned with financial goals</li>
                        <li>Analyze how delaying investments impacts long-term outcomes</li>
                    </ul>
                </div>
                
                <!-- Podcast Review Section -->
                <div class="bg-indigo-50 p-5 rounded-lg my-5">
                    <h3 class="font-bold text-gray-900 mb-2">Podcast Review: Understanding Compound Interest and the Rule of 72</h3>
                    <p class="text-gray-700 mb-4">Listen to this podcast to review key concepts from Day 1 before you begin today's activities.</p>
                    
                    <div class="bg-white rounded-lg p-4">
                        <audio controls class="w-full mb-2">
                            <source src="/Users/justin/pfl-academy/finished LM recordings/5.2 -  Understanding The Power of Compound interest and the Rule of 72.wav" type="audio/wav">
                            Your browser does not support the audio element.
                        </audio>
                        <div class="text-sm text-gray-500">
                            <p>Topics covered: Compound interest basics, comparing simple vs. compound interest, the Rule of 72, time value of money, power of starting early</p>
                        </div>
                    </div>
                </div>
                
                <p class="text-gray-700 my-4">Now let's dive into our interactive learning stations where you'll get hands-on experience with these concepts and see how they can dramatically impact your financial future\!</p>
            </section>
            
            <!-- Learning Station 1: Compound Interest Simulator -->
            <div class="learning-station" id="station1">
                <div class="flex items-center mb-3">
                    <span class="station-number">1</span>
                    <h2 class="text-xl font-semibold text-gray-900">Compound Interest Simulator</h2>
                </div>
                
                <!-- Activity Timer -->
                <div class="activity-timer flex items-center mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-600 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span class="text-sm text-indigo-700 font-medium">Estimated time: <span class="font-semibold">15 minutes</span></span>
                </div>
                
                <!-- Station Content -->
                <div class="prose max-w-none text-gray-700 mb-4">
                    <p>Use this interactive simulator to see how your money can grow with compound interest. Adjust the sliders to explore different scenarios and observe how changes in your initial investment, monthly contributions, interest rate, and time period affect your final balance.</p>
                    
                    <div class="bg-indigo-50 p-4 rounded-lg my-4">
                        <h3 class="font-semibold text-indigo-800 mb-2">Compound Interest Calculator</h3>
                        
                        <!-- Calculator Controls -->
                        <div class="grid md:grid-cols-2 gap-4 mb-4">
                            <!-- Initial Investment -->
                            <div class="range-slider-container bg-white p-3 rounded-lg shadow-sm">
                                <label class="block text-gray-700 font-medium mb-1">Initial Investment</label>
                                <div class="flex justify-between text-sm text-gray-600 mb-1">
                                    <span>$0</span>
                                    <span>$10,000</span>
                                </div>
                                <input type="range" id="initial-investment" class="range-slider" min="0" max="10000" step="100" value="1000">
                                <div class="text-center mt-2 text-indigo-700 font-medium">$<span id="initial-investment-value">1,000</span></div>
                            </div>
                            
                            <!-- Monthly Contribution -->
                            <div class="range-slider-container bg-white p-3 rounded-lg shadow-sm">
                                <label class="block text-gray-700 font-medium mb-1">Monthly Contribution</label>
                                <div class="flex justify-between text-sm text-gray-600 mb-1">
                                    <span>$0</span>
                                    <span>$1,000</span>
                                </div>
                                <input type="range" id="monthly-contribution" class="range-slider" min="0" max="1000" step="10" value="100">
                                <div class="text-center mt-2 text-indigo-700 font-medium">$<span id="monthly-contribution-value">100</span></div>
                            </div>
                            
                            <!-- Interest Rate -->
                            <div class="range-slider-container bg-white p-3 rounded-lg shadow-sm">
                                <label class="block text-gray-700 font-medium mb-1">Annual Interest Rate</label>
                                <div class="flex justify-between text-sm text-gray-600 mb-1">
                                    <span>0%</span>
                                    <span>12%</span>
                                </div>
                                <input type="range" id="interest-rate" class="range-slider" min="0" max="12" step="0.1" value="7">
                                <div class="text-center mt-2 text-indigo-700 font-medium"><span id="interest-rate-value">7.0</span>%</div>
                            </div>
                            
                            <!-- Time Period -->
                            <div class="range-slider-container bg-white p-3 rounded-lg shadow-sm">
                                <label class="block text-gray-700 font-medium mb-1">Time Period (Years)</label>
                                <div class="flex justify-between text-sm text-gray-600 mb-1">
                                    <span>1 year</span>
                                    <span>40 years</span>
                                </div>
                                <input type="range" id="time-period" class="range-slider" min="1" max="40" step="1" value="10">
                                <div class="text-center mt-2 text-indigo-700 font-medium"><span id="time-period-value">10</span> years</div>
                            </div>
                        </div>
                        
                        <!-- Calculator Results -->
                        <div class="bg-white p-4 rounded-lg shadow-sm mb-4">
                            <div class="grid md:grid-cols-3 gap-4">
                                <div class="text-center">
                                    <div class="text-gray-600 text-sm">Total Contributions</div>
                                    <div class="text-lg font-semibold text-indigo-700">$<span id="total-contributions">13,000</span></div>
                                </div>
                                <div class="text-center">
                                    <div class="text-gray-600 text-sm">Interest Earned</div>
                                    <div class="text-lg font-semibold text-indigo-700">$<span id="interest-earned">5,567</span></div>
                                </div>
                                <div class="text-center">
                                    <div class="text-gray-600 text-sm">Final Balance</div>
                                    <div class="text-xl font-bold text-green-600">$<span id="final-balance">18,567</span></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Growth Chart -->
                        <div class="bg-white p-4 rounded-lg shadow-sm">
                            <h4 class="font-medium text-gray-700 mb-2">Growth Over Time</h4>
                            <div class="h-64">
                                <canvas id="growth-chart"></canvas>
                            </div>
                            <div class="flex justify-end mt-2">
                                <label class="inline-flex items-center text-sm text-gray-600">
                                    <input type="checkbox" id="logarithmic-scale" class="mr-2"> 
                                    Show logarithmic scale
                                </label>
                            </div>
                        </div>
                        
                        <!-- Rule of 72 Calculator -->
                        <div class="mt-6 bg-white p-4 rounded-lg shadow-sm">
                            <h4 class="font-medium text-gray-700 mb-2">Rule of 72 Calculator</h4>
                            <p class="text-sm text-gray-600 mb-3">Based on your selected interest rate, your money will approximately double every:</p>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-indigo-700"><span id="doubling-time">10.3</span> years</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <h4 class="font-medium text-gray-800 mb-2">What patterns do you notice?</h4>
                        <textarea class="w-full p-2 border border-gray-300 rounded-md" rows="3" placeholder="Describe how changing different variables affects the growth of your investment..."></textarea>
                    </div>
                </div>
                
                <!-- Save Button -->
                <button class="pfl-button flex items-center" onclick="saveStation(1)">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                    Save and Continue
                </button>
            </div>
            
            <!-- Learning Station 2: Goal-Setting Activity -->
            <div class="learning-station" id="station2">
                <div class="flex items-center mb-3">
                    <span class="station-number">2</span>
                    <h2 class="text-xl font-semibold text-gray-900">Goal-Setting Activity</h2>
                </div>
                
                <!-- Activity Timer -->
                <div class="activity-timer flex items-center mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-600 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span class="text-sm text-indigo-700 font-medium">Estimated time: <span class="font-semibold">12 minutes</span></span>
                </div>
                
                <!-- Station Content -->
                <div class="prose max-w-none text-gray-700 mb-4">
                    <p>Now that you've explored how compound interest works, it's time to apply this knowledge to your own financial goals. In this activity, you'll create a personalized savings plan to reach a specific financial target.</p>
                    
                    <div class="bg-indigo-50 p-4 rounded-lg my-4">
                        <h3 class="font-semibold text-indigo-800 mb-3">Personalized Savings Plan</h3>
                        
                        <!-- Goal Setting Form -->
                        <div class="grid md:grid-cols-2 gap-4">
                            <!-- Financial Goal -->
                            <div class="bg-white p-3 rounded-lg shadow-sm">
                                <label for="financial-goal" class="block text-gray-700 font-medium mb-2">What are you saving for?</label>
                                <select id="financial-goal" class="w-full p-2 border border-gray-300 rounded-md">
                                    <option value="college">College Education</option>
                                    <option value="emergency">Emergency Fund</option>
                                    <option value="car">Vehicle Purchase</option>
                                    <option value="home">Home Down Payment</option>
                                    <option value="retirement">Retirement</option>
                                    <option value="other">Other</option>
                                </select>
                                <div id="other-goal-container" class="hidden mt-2">
                                    <input type="text" id="other-goal" placeholder="Specify your goal" class="w-full p-2 border border-gray-300 rounded-md">
                                </div>
                            </div>
                            
                            <!-- Target Amount -->
                            <div class="bg-white p-3 rounded-lg shadow-sm">
                                <label for="target-amount" class="block text-gray-700 font-medium mb-2">Target Amount</label>
                                <div class="relative">
                                    <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">$</span>
                                    <input type="number" id="target-amount" class="w-full p-2 pl-6 border border-gray-300 rounded-md" value="10000">
                                </div>
                            </div>
                            
                            <!-- Target Date -->
                            <div class="bg-white p-3 rounded-lg shadow-sm">
                                <label for="target-date" class="block text-gray-700 font-medium mb-2">Target Date</label>
                                <input type="date" id="target-date" class="w-full p-2 border border-gray-300 rounded-md">
                            </div>
                            
                            <!-- Expected Interest Rate -->
                            <div class="bg-white p-3 rounded-lg shadow-sm">
                                <label for="expected-rate" class="block text-gray-700 font-medium mb-2">Expected Annual Interest Rate</label>
                                <div class="relative">
                                    <input type="number" id="expected-rate" class="w-full p-2 border border-gray-300 rounded-md" min="0" max="20" step="0.1" value="7">
                                    <span class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500">%</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Calculate Button -->
                        <button id="calculate-plan" class="mt-4 pfl-button">Calculate My Savings Plan</button>
                        
                        <!-- Results Section -->
                        <div id="plan-results" class="mt-4 hidden">
                            <div class="bg-white p-4 rounded-lg shadow-sm">
                                <h4 class="font-medium text-gray-800 mb-3">Your Personalized Savings Plan</h4>
                                
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-gray-600 text-sm">Time Until Goal</div>
                                        <div class="text-lg font-semibold text-indigo-700"><span id="years-until-goal">10</span> years</div>
                                    </div>
                                    <div>
                                        <div class="text-gray-600 text-sm">Required Monthly Savings</div>
                                        <div class="text-lg font-semibold text-green-600">$<span id="required-monthly">67</span></div>
                                    </div>
                                    <div>
                                        <div class="text-gray-600 text-sm">Total Contributions</div>
                                        <div class="text-lg font-semibold text-indigo-700">$<span id="plan-total-contributions">8,040</span></div>
                                    </div>
                                    <div>
                                        <div class="text-gray-600 text-sm">Interest Earned</div>
                                        <div class="text-lg font-semibold text-indigo-700">$<span id="plan-interest-earned">1,960</span></div>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <div class="text-gray-600 text-sm">Power of Compound Interest</div>
                                    <div class="text-sm text-gray-700">In this plan, <span id="interest-percentage">20%</span> of your final amount will come from interest earnings.</div>
                                </div>
                                
                                <div class="mt-4 p-3 bg-indigo-50 rounded-lg">
                                    <h5 class="font-medium text-indigo-800 mb-1">Rule of 72 Perspective</h5>
                                    <p class="text-sm text-gray-700">At <span id="plan-interest-rate">7</span>% interest, your money would double approximately every <span id="plan-doubling-time">10.3</span> years.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Reflection -->
                    <div class="mt-4">
                        <h4 class="font-medium text-gray-800 mb-2">Reflection: Your Savings Strategy</h4>
                        <textarea class="w-full p-2 border border-gray-300 rounded-md" rows="3" placeholder="Based on the calculator results, describe your savings strategy to reach your goal. What adjustments might you make to your spending or saving habits?"></textarea>
                    </div>
                </div>
                
                <!-- Save Button -->
                <button class="pfl-button flex items-center" onclick="saveStation(2)">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                    Save and Continue
                </button>
            </div>
            
            <!-- Learning Station 3: Time Value of Money Challenge -->
            <div class="learning-station" id="station3">
                <div class="flex items-center mb-3">
                    <span class="station-number">3</span>
                    <h2 class="text-xl font-semibold text-gray-900">Time Value of Money Challenge</h2>
                </div>
                
                <!-- Activity Timer -->
                <div class="activity-timer flex items-center mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-600 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span class="text-sm text-indigo-700 font-medium">Estimated time: <span class="font-semibold">10 minutes</span></span>
                </div>
                
                <!-- Station Content -->
                <div class="prose max-w-none text-gray-700 mb-4">
                    <p>The time value of money is a fundamental concept in financial decision-making. This challenge will test your understanding of how delaying investments affects long-term outcomes and how compound interest changes the value of money over time.</p>
                    
                    <div class="bg-indigo-50 p-4 rounded-lg my-4">
                        <h3 class="font-semibold text-indigo-800 mb-2">Scenario Challenges</h3>
                        
                        <!-- Scenario 1 -->
                        <div class="bg-white p-4 rounded-lg shadow-sm mb-4" id="scenario1">
                            <h4 class="font-medium text-gray-800 mb-2">Scenario 1: Early vs. Late Investor</h4>
                            <p class="text-gray-700 mb-3">Two friends, Alex and Jordan, both want to invest for retirement at age 65:</p>
                            <ul class="list-disc list-inside text-gray-700 mb-3">
                                <li><strong>Alex</strong> invests $3,000 per year starting at age 25 for 10 years, then stops (total: $30,000)</li>
                                <li><strong>Jordan</strong> waits until age 35, then invests $3,000 per year for 30 years (total: $90,000)</li>
                            </ul>
                            <p class="text-gray-700 mb-3">Assuming a 7% annual return, who will have more money at age 65?</p>
                            
                            <div class="grid grid-cols-2 gap-4 mb-3">
                                <button class="scenario-option p-3 border border-gray-300 rounded-lg hover:bg-indigo-50" data-scenario="1" data-option="alex">
                                    <div class="font-medium">Alex</div>
                                    <div class="text-sm text-gray-600">10 years of early investing</div>
                                </button>
                                <button class="scenario-option p-3 border border-gray-300 rounded-lg hover:bg-indigo-50" data-scenario="1" data-option="jordan">
                                    <div class="font-medium">Jordan</div>
                                    <div class="text-sm text-gray-600">30 years of later investing</div>
                                </button>
                            </div>
                            
                            <div class="result hidden p-3 bg-green-50 border-l-4 border-green-500 rounded-r-lg">
                                <h5 class="font-medium text-green-800">Result</h5>
                                <p class="text-green-700"><strong>Alex ends up with $338,000</strong>, while <strong>Jordan ends up with $303,000</strong>. Despite investing only 1/3 as much money, Alex comes out ahead because the early investments had more time to compound\!</p>
                            </div>
                        </div>
                        
                        <!-- Scenario 2 -->
                        <div class="bg-white p-4 rounded-lg shadow-sm mb-4" id="scenario2">
                            <h4 class="font-medium text-gray-800 mb-2">Scenario 2: Lump Sum vs. Regular Investments</h4>
                            <p class="text-gray-700 mb-3">You receive a $10,000 bonus and have two investment options:</p>
                            <ul class="list-disc list-inside text-gray-700 mb-3">
                                <li><strong>Option A:</strong> Invest all $10,000 immediately in a fund averaging 7% annual returns</li>
                                <li><strong>Option B:</strong> Keep the money in a savings account earning 1% and invest $1,000 per year for the next 10 years in the same fund (7% returns)</li>
                            </ul>
                            <p class="text-gray-700 mb-3">Which option will give you more money after 10 years?</p>
                            
                            <div class="grid grid-cols-2 gap-4 mb-3">
                                <button class="scenario-option p-3 border border-gray-300 rounded-lg hover:bg-indigo-50" data-scenario="2" data-option="lump">
                                    <div class="font-medium">Option A</div>
                                    <div class="text-sm text-gray-600">Lump sum investment</div>
                                </button>
                                <button class="scenario-option p-3 border border-gray-300 rounded-lg hover:bg-indigo-50" data-scenario="2" data-option="regular">
                                    <div class="font-medium">Option B</div>
                                    <div class="text-sm text-gray-600">Regular investments</div>
                                </button>
                            </div>
                            
                            <div class="result hidden p-3 bg-green-50 border-l-4 border-green-500 rounded-r-lg">
                                <h5 class="font-medium text-green-800">Result</h5>
                                <p class="text-green-700"><strong>Option A results in $19,672</strong> after 10 years, while <strong>Option B results in approximately $16,275</strong>. The lump sum investment had more time to compound, demonstrating that time in the market is typically more important than timing the market.</p>
                            </div>
                        </div>
                        
                        <!-- Scenario 3 -->
                        <div class="bg-white p-4 rounded-lg shadow-sm" id="scenario3">
                            <h4 class="font-medium text-gray-800 mb-2">Scenario 3: Interest Rate Trade-off</h4>
                            <p class="text-gray-700 mb-3">You're considering two investment accounts:</p>
                            <ul class="list-disc list-inside text-gray-700 mb-3">
                                <li><strong>Account A:</strong> A 5-year CD paying 4% interest annually</li>
                                <li><strong>Account B:</strong> A 5-year investment fund with an average return of 8% but higher risk</li>
                            </ul>
                            <p class="text-gray-700 mb-3">If you invest $5,000, how much more would Account B be worth than Account A after 5 years?</p>
                            
                            <div class="grid grid-cols-3 gap-4 mb-3">
                                <button class="scenario-option p-3 border border-gray-300 rounded-lg hover:bg-indigo-50" data-scenario="3" data-option="a">
                                    <div class="font-medium">$500-$800</div>
                                </button>
                                <button class="scenario-option p-3 border border-gray-300 rounded-lg hover:bg-indigo-50" data-scenario="3" data-option="b">
                                    <div class="font-medium">$800-$1,100</div>
                                </button>
                                <button class="scenario-option p-3 border border-gray-300 rounded-lg hover:bg-indigo-50" data-scenario="3" data-option="c">
                                    <div class="font-medium">$1,100-$1,400</div>
                                </button>
                            </div>
                            
                            <div class="result hidden p-3 bg-green-50 border-l-4 border-green-500 rounded-r-lg">
                                <h5 class="font-medium text-green-800">Result</h5>
                                <p class="text-green-700"><strong>Account A would grow to $6,083</strong> after 5 years, while <strong>Account B would grow to $7,347</strong>. The difference is <strong>$1,264</strong>, falling within the $1,100-$1,400 range. This 4% difference in interest rates creates a significant difference over just 5 years\!</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Summary -->
                    <div id="challenge-summary" class="hidden mt-4 p-4 bg-indigo-100 rounded-lg">
                        <h4 class="font-medium text-indigo-800 mb-2">Challenge Summary</h4>
                        <p class="text-gray-700 mb-3">You answered <span id="correct-answers">0</span> out of 3 scenarios correctly.</p>
                        <p class="text-gray-700">Key takeaways from these scenarios:</p>
                        <ul class="list-disc list-inside text-gray-700">
                            <li>Starting early is critical - even small amounts invested early can outperform larger amounts invested later</li>
                            <li>Lump sum investing typically outperforms dollar-cost averaging when you have the funds available</li>
                            <li>Small differences in interest rates compound into significant differences over time</li>
                            <li>The Rule of 72 helps you quickly understand the impact of different interest rates on doubling time</li>
                        </ul>
                    </div>
                    
                    <!-- Reflection -->
                    <div class="mt-4">
                        <h4 class="font-medium text-gray-800 mb-2">Reflection: Time Value of Money</h4>
                        <textarea class="w-full p-2 border border-gray-300 rounded-md" rows="3" placeholder="How does understanding the time value of money change your perspective on saving and investing? What actions might you take differently based on these scenarios?"></textarea>
                    </div>
                </div>
                
                <!-- Save Button -->
                <button class="pfl-button flex items-center" onclick="saveStation(3)">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                    Save and Continue
                </button>
            </div>
            
            <!-- Portfolio Integration Section -->
            <section id="portfolio" class="mt-12">
                <h2 class="text-2xl font-bold text-gray-900 section-title">Portfolio Integration</h2>
                <p class="text-gray-700 mb-4">Now that you've completed all stations, it's time to integrate your work into a comprehensive portfolio. Your compound interest and savings strategy is a crucial part of your overall financial plan.</p>
                
                <div class="bg-indigo-50 p-6 rounded-lg">
                    <h3 class="text-xl font-semibold text-indigo-900 mb-4">Your Compound Interest Strategy Portfolio</h3>
                    <p class="text-gray-700 mb-4">Your portfolio combines elements from today's Learning Lab into a cohesive plan:</p>
                    
                    <ul class="list-disc list-inside mb-4 text-gray-700">
                        <li>Growth projections from the Compound Interest Simulator</li>
                        <li>Your personalized savings plan for key financial goals</li>
                        <li>Insights from the Time Value of Money Challenge</li>
                    </ul>
                    
                    <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-2">Compound Interest Investment Strategy</label>
                        <textarea id="investment-strategy" class="w-full p-2 border border-gray-300 rounded-md" rows="4" placeholder="Describe your compound interest investment strategy. Include details on initial investments, regular contributions, target interest rates, and timeline..."></textarea>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-2">Application of the Rule of 72</label>
                        <textarea id="rule-72-application" class="w-full p-2 border border-gray-300 rounded-md" rows="3" placeholder="Explain how you'll use the Rule of 72 in your financial decision-making..."></textarea>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-2">Portfolio Summary</label>
                        <textarea id="portfolio-summary" class="w-full p-2 border border-gray-300 rounded-md" rows="4" data-ai-check="true" data-assessment-weight="4" placeholder="Summarize what you've learned about compound interest and how you'll apply these concepts to your financial future..."></textarea>
                        <div class="mt-2 hidden feedback-container text-green-600 text-sm"></div>
                    </div>
                    
                    <button class="pfl-button px-6 py-2 rounded-lg mt-2 transition duration-200 hover:shadow-xl hover:-translate-y-1" onclick="savePortfolio()">Complete Portfolio</button>
                </div>
            </section>
            
            <!-- Reflection Section -->
            <section id="reflection" class="mt-12">
                <h2 class="text-2xl font-bold text-gray-900 section-title">Reflection</h2>
                
                <div class="discussion-prompt">
                    <h3 class="text-lg font-semibold text-indigo-800 mb-2">Final Reflection</h3>
                    <p class="text-gray-700 mb-3">Reflect on what you've learned about compound interest and the Rule of 72. How has this Learning Lab changed your perspective on saving and investing? What specific actions are you motivated to take based on what you've learned today?</p>
                    <textarea id="final-reflection" class="w-full p-2 border border-gray-300 rounded-md" rows="4" data-ai-check="true" data-assessment-weight="5" placeholder="Share your thoughts and reflections here..."></textarea>
                    <div class="mt-2 hidden feedback-container text-green-600 text-sm"></div>
                </div>
                
                <div class="flex justify-end mt-8">
                    <a href="chapter-5-3-day1.html" class="pfl-button px-4 py-2 rounded-md font-medium transition flex items-center hover:shadow-xl hover:-translate-y-1">
                        Continue to Chapter 5.3: Evaluating Saving and Investment Strategies
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </a>
                </div>
            </section>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div id="toast" class="toast-notification">
        <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <span id="toast-message">Your progress has been saved\!</span>
        </div>
    </div>
    
    <footer class="bg-gradient-to-r from-indigo-900 to-purple-900 text-white py-8 mt-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <div class="flex items-center mb-4">
                        <div class="flex justify-center items-center h-10 w-10 rounded bg-white/20 text-white font-bold">
                            PFL
                        </div>
                        <span class="ml-3 text-xl font-bold">PFL Academy</span>
                    </div>
                    <p class="text-indigo-200">Empowering students with financial literacy skills for life.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-indigo-200 hover:text-white transition-colors">Home</a></li>
                        <li><a href="#" class="text-indigo-200 hover:text-white transition-colors">Curriculum</a></li>
                        <li><a href="#" class="text-indigo-200 hover:text-white transition-colors">Resources</a></li>
                        <li><a href="#" class="text-indigo-200 hover:text-white transition-colors">Help Center</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact</h3>
                    <p class="text-indigo-200">If you need assistance, please contact your instructor or email support.</p>
                </div>
            </div>
            <div class="border-t border-indigo-800 mt-8 pt-6 text-center text-indigo-200">
                <p>&copy; 2025 PFL Academy. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <script>
        // Station progress tracking
        let stationProgress = {
            station1: false,
            station2: false,
            station3: false,
            portfolio: false
        };
        
        // Compound Interest Calculator
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize chart
            const ctx = document.getElementById('growth-chart').getContext('2d');
            let growthChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 41}, (_, i) => i),
                    datasets: [
                        {
                            label: 'Total Balance',
                            borderColor: '#4f46e5',
                            backgroundColor: 'rgba(79, 70, 229, 0.1)',
                            data: [],
                            fill: true
                        },
                        {
                            label: 'Total Contributions',
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            data: [],
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.raw \!== null) {
                                        label += new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(context.raw);
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Years'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Amount ($)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return new Intl.NumberFormat('en-US', { 
                                        style: 'currency', 
                                        currency: 'USD',
                                        minimumFractionDigits: 0,
                                        maximumFractionDigits: 0
                                    }).format(value);
                                }
                            }
                        }
                    }
                }
            });
            
            // Initialize calculator
            const initialInvestmentInput = document.getElementById('initial-investment');
            const initialInvestmentValue = document.getElementById('initial-investment-value');
            const monthlyContributionInput = document.getElementById('monthly-contribution');
            const monthlyContributionValue = document.getElementById('monthly-contribution-value');
            const interestRateInput = document.getElementById('interest-rate');
            const interestRateValue = document.getElementById('interest-rate-value');
            const timePeriodInput = document.getElementById('time-period');
            const timePeriodValue = document.getElementById('time-period-value');
            const totalContributions = document.getElementById('total-contributions');
            const interestEarned = document.getElementById('interest-earned');
            const finalBalance = document.getElementById('final-balance');
            const doublingTime = document.getElementById('doubling-time');
            const logarithmicScale = document.getElementById('logarithmic-scale');
            
            // Update display values when sliders change
            initialInvestmentInput.addEventListener('input', () => {
                initialInvestmentValue.textContent = Number(initialInvestmentInput.value).toLocaleString();
                calculateCompoundInterest();
            });
            
            monthlyContributionInput.addEventListener('input', () => {
                monthlyContributionValue.textContent = Number(monthlyContributionInput.value).toLocaleString();
                calculateCompoundInterest();
            });
            
            interestRateInput.addEventListener('input', () => {
                interestRateValue.textContent = Number(interestRateInput.value).toFixed(1);
                calculateCompoundInterest();
                updateDoublingTime();
            });
            
            timePeriodInput.addEventListener('input', () => {
                timePeriodValue.textContent = timePeriodInput.value;
                calculateCompoundInterest();
            });
            
            logarithmicScale.addEventListener('change', () => {
                updateChartScale();
                calculateCompoundInterest();
            });
            
            // Calculate compound interest
            function calculateCompoundInterest() {
                const initialInvestment = parseFloat(initialInvestmentInput.value);
                const monthlyContribution = parseFloat(monthlyContributionInput.value);
                const interestRate = parseFloat(interestRateInput.value) / 100;
                const timePeriod = parseInt(timePeriodInput.value);
                
                // Calculate final amount
                let totalBalance = initialInvestment;
                let totalContrib = initialInvestment;
                
                // Generate data for chart
                let balanceData = [initialInvestment];
                let contributionData = [initialInvestment];
                
                for (let year = 1; year <= timePeriod; year++) {
                    // Add monthly contributions for the year
                    totalContrib += monthlyContribution * 12;
                    
                    // Grow the balance with interest
                    totalBalance = totalBalance * (1 + interestRate) + monthlyContribution * 12;
                    
                    // Add data points
                    balanceData.push(totalBalance);
                    contributionData.push(totalContrib);
                }
                
                // Update results
                totalContributions.textContent = totalContrib.toLocaleString(undefined, {maximumFractionDigits: 0});
                finalBalance.textContent = totalBalance.toLocaleString(undefined, {maximumFractionDigits: 0});
                interestEarned.textContent = (totalBalance - totalContrib).toLocaleString(undefined, {maximumFractionDigits: 0});
                
                // Update chart data
                growthChart.data.labels = Array.from({length: timePeriod + 1}, (_, i) => i);
                growthChart.data.datasets[0].data = balanceData;
                growthChart.data.datasets[1].data = contributionData;
                
                // Update chart
                growthChart.update();
            }
            
            // Update chart scale (linear or logarithmic)
            function updateChartScale() {
                if (logarithmicScale.checked) {
                    growthChart.options.scales.y.type = 'logarithmic';
                } else {
                    growthChart.options.scales.y.type = 'linear';
                }
                growthChart.update();
            }
            
            // Update doubling time based on Rule of 72
            function updateDoublingTime() {
                const interestRate = parseFloat(interestRateInput.value);
                const years = 72 / interestRate;
                doublingTime.textContent = years.toFixed(1);
            }
            
            // Initialize calculator
            calculateCompoundInterest();
            updateDoublingTime();
            
            // Goal-Setting Activity
            const financialGoal = document.getElementById('financial-goal');
            const otherGoalContainer = document.getElementById('other-goal-container');
            const calculatePlanBtn = document.getElementById('calculate-plan');
            const planResults = document.getElementById('plan-results');
            
            // Show/hide other goal field
            financialGoal.addEventListener('change', () => {
                if (financialGoal.value === 'other') {
                    otherGoalContainer.classList.remove('hidden');
                } else {
                    otherGoalContainer.classList.add('hidden');
                }
            });
            
            // Calculate savings plan
            calculatePlanBtn.addEventListener('click', () => {
                const targetAmount = parseFloat(document.getElementById('target-amount').value);
                const targetDate = new Date(document.getElementById('target-date').value);
                const today = new Date();
                const expectedRate = parseFloat(document.getElementById('expected-rate').value) / 100;
                
                // Calculate years until goal
                const yearsUntilGoal = Math.max(1, Math.round((targetDate - today) / (1000 * 60 * 60 * 24 * 365.25)));
                
                // Calculate required monthly savings
                const monthlyRate = expectedRate / 12;
                const months = yearsUntilGoal * 12;
                const monthlyPayment = targetAmount * monthlyRate / (Math.pow(1 + monthlyRate, months) - 1);
                
                // Calculate total contributions and interest
                const totalContributions = monthlyPayment * months;
                const interestEarned = targetAmount - totalContributions;
                const interestPercentage = Math.round((interestEarned / targetAmount) * 100);
                
                // Update results
                document.getElementById('years-until-goal').textContent = yearsUntilGoal;
                document.getElementById('required-monthly').textContent = monthlyPayment.toFixed(0);
                document.getElementById('plan-total-contributions').textContent = totalContributions.toLocaleString(undefined, {maximumFractionDigits: 0});
                document.getElementById('plan-interest-earned').textContent = interestEarned.toLocaleString(undefined, {maximumFractionDigits: 0});
                document.getElementById('interest-percentage').textContent = interestPercentage + '%';
                document.getElementById('plan-interest-rate').textContent = expectedRate * 100;
                document.getElementById('plan-doubling-time').textContent = (72 / (expectedRate * 100)).toFixed(1);
                
                // Show results
                planResults.classList.remove('hidden');
            });
            
            // Time Value of Money Challenge
            let correctAnswersCount = 0;
            const scenarioOptions = document.querySelectorAll('.scenario-option');
            
            scenarioOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const scenario = this.dataset.scenario;
                    const selectedOption = this.dataset.option;
                    const scenarioElement = document.getElementById('scenario' + scenario);
                    const result = scenarioElement.querySelector('.result');
                    
                    // Mark all options as unselected
                    scenarioElement.querySelectorAll('.scenario-option').forEach(opt => {
                        opt.classList.remove('bg-indigo-100', 'border-indigo-500');
                    });
                    
                    // Mark this option as selected
                    this.classList.add('bg-indigo-100', 'border-indigo-500');
                    
                    // Show result
                    result.classList.remove('hidden');
                    
                    // Check if correct
                    let isCorrect = false;
                    if (scenario === '1' && selectedOption === 'alex') isCorrect = true;
                    if (scenario === '2' && selectedOption === 'lump') isCorrect = true;
                    if (scenario === '3' && selectedOption === 'c') isCorrect = true;
                    
                    if (isCorrect) {
                        correctAnswersCount++;
                    }
                    
                    // Check if all scenarios are answered
                    const allAnswered = document.querySelectorAll('.result:not(.hidden)').length === 3;
                    if (allAnswered) {
                        document.getElementById('correct-answers').textContent = correctAnswersCount;
                        document.getElementById('challenge-summary').classList.remove('hidden');
                    }
                });
            });
            
            // Handle animation on scroll
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-fade-in');
                    }
                });
            }, {
                root: null,
                threshold: 0.1
            });
            
            document.querySelectorAll('.learning-station, #portfolio, #reflection').forEach(el => {
                observer.observe(el);
            });
            
            // Setup AI feedback simulation for textareas with data-ai-check
            document.querySelectorAll('[data-ai-check="true"]').forEach(element => {
                element.addEventListener('blur', function() {
                    if (this.value.length > 20) {
                        const feedback = this.nextElementSibling;
                        if (feedback && feedback.classList.contains('feedback-container')) {
                            let feedbackMessage = '';
                            
                            if (this.value.length < 100) {
                                feedbackMessage = "Good start\! Consider adding more specific details about how you'll apply these concepts to your personal financial decisions.";
                            } else if (this.value.toLowerCase().includes('compound') && this.value.toLowerCase().includes('interest')) {
                                feedbackMessage = "Excellent reflection\! Your understanding of compound interest concepts is clear, and you've made good connections to personal application.";
                            } else {
                                feedbackMessage = "Good reflection. Adding specific references to compound interest concepts and the Rule of 72 would strengthen your response.";
                            }
                            
                            feedback.textContent = feedbackMessage;
                            feedback.classList.remove('hidden');
                        }
                    }
                });
            });
        });
        
        // Save station progress
        function saveStation(stationNumber) {
            stationProgress['station' + stationNumber] = true;
            updateProgress();
            showToast(`Station ${stationNumber} completed\!`);
            
            // Update station indicator
            const indicators = document.querySelectorAll('.station-indicator');
            if (indicators[stationNumber - 1]) {
                indicators[stationNumber - 1].classList.add('active');
            }
            
            // Scroll to next station if available
            const nextStation = document.getElementById('station' + (stationNumber + 1));
            if (nextStation) {
                setTimeout(() => {
                    nextStation.scrollIntoView({ behavior: 'smooth' });
                }, 1000);
            } else if (stationNumber === 3) {
                // If this was the last station, scroll to portfolio
                setTimeout(() => {
                    document.getElementById('portfolio').scrollIntoView({ behavior: 'smooth' });
                }, 1000);
            }
        }
        
        // Save portfolio
        function savePortfolio() {
            stationProgress.portfolio = true;
            updateProgress();
            showToast('Added to portfolio\!');
            
            // Update portfolio indicator
            const indicators = document.querySelectorAll('.station-indicator');
            if (indicators[3]) {
                indicators[3].classList.add('active');
            }
            
            // Scroll to reflection
            setTimeout(() => {
                document.getElementById('reflection').scrollIntoView({ behavior: 'smooth' });
            }, 1000);
        }
        
        // Update progress bar and percentage
        function updateProgress() {
            const totalStations = Object.keys(stationProgress).length;
            const completedStations = Object.values(stationProgress).filter(Boolean).length;
            const percentage = Math.round((completedStations / totalStations) * 100);
            
            document.querySelector('.from-indigo-600.to-purple-600.h-2\\.5').style.width = percentage + '%';
            document.querySelector('.font-medium').textContent = `${completedStations}/${totalStations} stations`;
        }
        
        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-message').textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // Highlight active section in navigation based on scroll position
        window.addEventListener('DOMContentLoaded', () => {
            const objectives = document.querySelector('#learning-objectives');
            const sections = document.querySelectorAll('section, .learning-station');
            const navLinks = document.querySelectorAll('#section-navigation a');
            
            function updateActiveSection() {
                const scrollPosition = window.scrollY + 100;
                
                // First reset all links
                navLinks.forEach(link => {
                    link.classList.remove('text-indigo-700', 'font-medium');
                    link.classList.add('text-gray-700');
                });
                
                // Find the current section
                let currentSection = '';
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.offsetHeight;
                    
                    if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                        currentSection = section.id;
                    }
                });
                
                // If we have a current section, highlight the corresponding link
                if (currentSection) {
                    const activeLink = document.querySelector(`#section-navigation a[href="#${currentSection}"]`);
                    if (activeLink) {
                        activeLink.classList.remove('text-gray-700');
                        activeLink.classList.add('text-indigo-700', 'font-medium');
                    }
                }
            }
            
            // Update active section when scrolling
            window.addEventListener('scroll', updateActiveSection);
            
            // Update active section on page load
            updateActiveSection();
        });
    </script>
</body>
</html>
